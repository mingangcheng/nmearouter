<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Andrea Boni NMEARouter</title>
<link href="css/bootstrap.min.css" rel="stylesheet">
</head>
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/angular.min.js"></script>
<script type="text/javascript">
    var app = angular.module("nmearouter", []);

    var xmlHttp = new XMLHttpRequest();
    xmlHttp.open( "GET", "http://" + window.location.hostname + ":1112/sensor?format=json" , false);
    xmlHttp.setRequestHeader('Content-Type', 'text/plain');
    xmlHttp.send( null );
	var sensor = JSON.parse(xmlHttp.responseText);
	if (sensor.sensor.Barometer_0!=null) sensor.sensor.Barometer_0 *= 1000;  
	if (sensor.sensor.Barometer_1!=null) sensor.sensor.Barometer_1 *= 1000;  
    app.controller("myCtrl", function($scope) {
		$scope.sensor = sensor;  
   });
   
</script>


<body ng-app="nmearouter">
	<div id="nmearouter" class="container-fluid" ng-controller="myCtrl">
		<ol class="breadcrumb">
		  <li class="breadcrumb-item"><a href="index.html">Home</a></li>
		  <li class="breadcrumb-item active">Sensors</li>
		</ol>      
		
		<div class="row">
			<div class="col-lg-3">
				<div class="panel panel-default">
		 			<div class="panel-heading">
		   				<h2 class="panel-title">Voltage</h2>
		 			</div>
			  		<div class="panel-body" style="height: 250px">
						<h3>Svc {{sensor.sensor.V0}} V<br>
						Eng {{sensor.sensor.V1}} V<br>
						<br>CPU {{sensor.sensor.CPUTemp}} °C</h3>
			  		</div>
			  	</div>
			</div>
			<div class="col-lg-3">
				<div class="panel panel-default">
		 			<div class="panel-heading">
		   				<h2 class="panel-title">Meteo</h2>
		 			</div>
			  		<div class="panel-body" style="height: 250px">
						<h3>{{sensor.sensor.AirTemp_0}} °C<br>
						{{sensor.sensor.Barometer_0}} MB<br>
						<br>{{sensor.sensor.AirTemp_1}} °C<br>
						{{sensor.sensor.Barometer_1}} MB<br>
						{{sensor.sensor.Humidity_1}} %<br>
						<br>{{sensor.sensor.ExtAirTemp}} °C<br>
						</h3>
			  		</div>
			  	</div>
			</div>
			<div class="col-lg-3">
				<div class="panel panel-default">
		 			<div class="panel-heading">
		   				<h2 class="panel-title">Gyro</h2>
		 			</div>
			  		<div class="panel-body" style="height: 250px">
						<h3>Head: {{sensor.sensor.HEAD}}°</h3>
						<h3>Roll: {{sensor.sensor.ROLL}}°</h3>
						<h3>Pitch: {{sensor.sensor.PITCH}}°</h3>
			  		</div>
			  	</div>
			</div>
			<div class="col-lg-3">
				<div class="panel panel-default">
		 			<div class="panel-heading">
		   				<h2 class="panel-title">Position</h2>
		 			</div>
			  		<div class="panel-body" style="height: 250px">
						<h3>{{sensor.Position.Latitude}}<br>
						{{sensor.Position.Longitude}}</h3>
			  		</div>
			  	</div>
			</div>
		</div>
		
	</div>
</body>
</html>